# Comparing `tmp/pysui_gadgets-0.1.0-py3-none-any.whl.zip` & `tmp/pysui_gadgets-0.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,10 +1,10 @@
-Zip file size: 48381 bytes, number of entries: 38
+Zip file size: 49410 bytes, number of entries: 39
 -rw-r--r--  2.0 unx     1098 b- defN 23-May-13 10:25 pysui_gadgets/__init__.py
--rw-r--r--  2.0 unx      679 b- defN 23-May-25 07:55 pysui_gadgets/version.py
+-rw-r--r--  2.0 unx      679 b- defN 23-Jul-05 20:28 pysui_gadgets/version.py
 -rw-r--r--  2.0 unx      655 b- defN 22-Dec-07 19:10 pysui_gadgets/dsl/__init__.py
 -rw-r--r--  2.0 unx     2393 b- defN 23-Apr-16 18:55 pysui_gadgets/dsl/dslgen.py
 -rw-r--r--  2.0 unx      711 b- defN 22-Dec-26 21:24 pysui_gadgets/dsl/dsl_run/__init__.py
 -rw-r--r--  2.0 unx     1857 b- defN 22-Dec-26 21:24 pysui_gadgets/dsl/dsl_run/converter.py
 -rw-r--r--  2.0 unx      664 b- defN 22-Dec-26 21:24 pysui_gadgets/dsl/generators/__init__.py
 -rw-r--r--  2.0 unx    14074 b- defN 22-Dec-16 10:07 pysui_gadgets/dsl/generators/package_gen.py
 -rw-r--r--  2.0 unx      672 b- defN 22-Dec-11 21:26 pysui_gadgets/dsl/ir/__init__.py
@@ -18,23 +18,24 @@
 -rw-r--r--  2.0 unx      665 b- defN 22-Dec-07 19:05 pysui_gadgets/package/__init__.py
 -rw-r--r--  2.0 unx     3175 b- defN 23-Apr-16 18:54 pysui_gadgets/package/package.py
 -rw-r--r--  2.0 unx      665 b- defN 22-Dec-07 10:00 pysui_gadgets/package/cmds/__init__.py
 -rw-r--r--  2.0 unx     5576 b- defN 22-Dec-26 21:16 pysui_gadgets/package/cmds/funcs.py
 -rw-r--r--  2.0 unx     1137 b- defN 22-Dec-26 21:14 pysui_gadgets/package/cmds/lists.py
 -rw-r--r--  2.0 unx     3505 b- defN 23-Apr-13 13:53 pysui_gadgets/package/cmds/structs.py
 -rw-r--r--  2.0 unx      681 b- defN 23-May-13 10:27 pysui_gadgets/splay/__init__.py
--rw-r--r--  2.0 unx     5490 b- defN 23-May-18 20:51 pysui_gadgets/splay/splay.py
+-rw-r--r--  2.0 unx     7367 b- defN 23-Jul-08 09:24 pysui_gadgets/splay/splay.py
 -rw-r--r--  2.0 unx      679 b- defN 22-Dec-28 20:55 pysui_gadgets/to_one/__init__.py
--rw-r--r--  2.0 unx     4054 b- defN 23-May-13 10:29 pysui_gadgets/to_one/to_one.py
+-rw-r--r--  2.0 unx     3377 b- defN 23-Jul-08 09:10 pysui_gadgets/to_one/to_one.py
 -rw-r--r--  2.0 unx      666 b- defN 22-Dec-07 18:37 pysui_gadgets/utils/__init__.py
--rw-r--r--  2.0 unx     2860 b- defN 23-May-13 10:47 pysui_gadgets/utils/cmd_arg_validators.py
--rw-r--r--  2.0 unx     9816 b- defN 23-Jun-05 10:10 pysui_gadgets/utils/cmdlines.py
--rw-r--r--  2.0 unx     6628 b- defN 22-Dec-26 21:16 pysui_gadgets/utils/filters.py
+-rw-r--r--  2.0 unx     2830 b- defN 23-Jul-08 09:30 pysui_gadgets/utils/cmd_arg_validators.py
+-rw-r--r--  2.0 unx    10306 b- defN 23-Jul-08 09:22 pysui_gadgets/utils/cmdlines.py
+-rw-r--r--  2.0 unx     1106 b- defN 23-Jul-07 10:28 pysui_gadgets/utils/exec_helpers.py
+-rw-r--r--  2.0 unx     6624 b- defN 23-Jul-07 10:27 pysui_gadgets/utils/filters.py
 -rw-r--r--  2.0 unx      674 b- defN 23-Jun-04 22:02 pysui_gadgets/vh/__init__.py
 -rw-r--r--  2.0 unx     7051 b- defN 23-Jun-05 10:06 pysui_gadgets/vh/vh.py
--rw-r--r--  2.0 unx    11357 b- defN 23-Jun-05 10:39 pysui_gadgets-0.1.0.dist-info/LICENSE
--rw-r--r--  2.0 unx     2837 b- defN 23-Jun-05 10:39 pysui_gadgets-0.1.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jun-05 10:39 pysui_gadgets-0.1.0.dist-info/WHEEL
--rw-r--r--  2.0 unx      255 b- defN 23-Jun-05 10:39 pysui_gadgets-0.1.0.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       23 b- defN 23-Jun-05 10:39 pysui_gadgets-0.1.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     3386 b- defN 23-Jun-05 10:39 pysui_gadgets-0.1.0.dist-info/RECORD
-38 files, 123865 bytes uncompressed, 42893 bytes compressed:  65.4%
+-rw-r--r--  2.0 unx    11357 b- defN 23-Jul-08 09:40 pysui_gadgets-0.2.0.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2837 b- defN 23-Jul-08 09:40 pysui_gadgets-0.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jul-08 09:40 pysui_gadgets-0.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx      255 b- defN 23-Jul-08 09:40 pysui_gadgets-0.2.0.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       23 b- defN 23-Jul-08 09:40 pysui_gadgets-0.2.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     3479 b- defN 23-Jul-08 09:40 pysui_gadgets-0.2.0.dist-info/RECORD
+39 files, 126720 bytes uncompressed, 43776 bytes compressed:  65.5%
```

## zipnote {}

```diff
@@ -81,35 +81,38 @@
 
 Filename: pysui_gadgets/utils/cmd_arg_validators.py
 Comment: 
 
 Filename: pysui_gadgets/utils/cmdlines.py
 Comment: 
 
+Filename: pysui_gadgets/utils/exec_helpers.py
+Comment: 
+
 Filename: pysui_gadgets/utils/filters.py
 Comment: 
 
 Filename: pysui_gadgets/vh/__init__.py
 Comment: 
 
 Filename: pysui_gadgets/vh/vh.py
 Comment: 
 
-Filename: pysui_gadgets-0.1.0.dist-info/LICENSE
+Filename: pysui_gadgets-0.2.0.dist-info/LICENSE
 Comment: 
 
-Filename: pysui_gadgets-0.1.0.dist-info/METADATA
+Filename: pysui_gadgets-0.2.0.dist-info/METADATA
 Comment: 
 
-Filename: pysui_gadgets-0.1.0.dist-info/WHEEL
+Filename: pysui_gadgets-0.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: pysui_gadgets-0.1.0.dist-info/entry_points.txt
+Filename: pysui_gadgets-0.2.0.dist-info/entry_points.txt
 Comment: 
 
-Filename: pysui_gadgets-0.1.0.dist-info/top_level.txt
+Filename: pysui_gadgets-0.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: pysui_gadgets-0.1.0.dist-info/RECORD
+Filename: pysui_gadgets-0.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## pysui_gadgets/version.py

```diff
@@ -8,8 +8,8 @@
 #    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 #    See the License for the specific language governing permissions and
 #    limitations under the License.
 
 # -*- coding: utf-8 -*-
 
 """Pysui Gadget Version."""
-__version__ = "0.1.0"
+__version__ = "0.2.0"
```

## pysui_gadgets/splay/splay.py

```diff
@@ -10,103 +10,149 @@
 #    limitations under the License.
 
 # -*- coding: utf-8 -*-
 
 """Splay - Splits coins evenly across addresses."""
 
 import sys
-from pysui.sui.sui_config import SuiConfig
-from pysui.sui.sui_clients.common import handle_result
-from pysui.sui.sui_clients.sync_client import SuiClient
-from pysui.sui.sui_clients.transaction import SuiTransaction
-from pysui.sui.sui_types.scalars import ObjectID
-from pysui.sui.sui_types.address import SuiAddress
+from typing import Callable, Optional, Union
+from pysui import SuiConfig, SyncClient, SyncTransaction, ObjectID, SuiAddress, handle_result, SuiRpcResult
 from pysui.sui.sui_types import bcs
-from pysui.sui.sui_txresults.single_tx import SuiCoinObjects
-from pysui.sui.sui_txresults.complex_tx import TxInspectionResult, TxResponse
+from pysui.sui.sui_utils import partition
+from pysui.sui.sui_txresults.single_tx import SuiCoinObjects, SuiCoinObject
+from pysui.sui.sui_txresults.complex_tx import TxInspectionResult
 
 from pysui_gadgets.utils.cmdlines import splay_parser
+from pysui_gadgets.utils.exec_helpers import add_owner_to_gas_object
 
+# Maximum coin inputs to merge to balance cost
 
-def _set_sender(txn: SuiTransaction, owner: SuiAddress) -> SuiTransaction:
+
+def _inspect_only(txn: SyncTransaction, gas_id: Optional[str] = None):
+    """Run the inspection of the splay transaction.."""
+    print(txn.raw_kind().to_json(indent=2))
+    inspect_result = txn.inspect_all()
+    if isinstance(inspect_result, SuiRpcResult):
+        return inspect_result
+    if isinstance(inspect_result, TxInspectionResult):
+        return SuiRpcResult(True, "", inspect_result)
+
+
+def _execute(txn: SyncTransaction, gas_id: Optional[str] = None):
+    """Execute the transaction."""
+    return txn.execute(gas_budget="100000", use_gas_object=gas_id)
+
+
+def _set_sender(txn: SyncTransaction, owner: SuiAddress) -> SyncTransaction:
     """Assign the transaction owner."""
     txn.signer_block.sender = owner or txn.client.config.active_address
     return txn
 
 
-def _coin_merge(txn: SuiTransaction, coins: list[ObjectID]):
+def _validate_owned_coins(all_coins: list[SuiCoinObjects], use_coins: list[ObjectID]) -> list[SuiCoinObjects]:
+    """."""
+    a_coin_ids = [x.object_id for x in all_coins]
+    result_coins: list[SuiCoinObjects] = []
+    for coin in use_coins:
+        try:
+            idx = a_coin_ids.index(coin.value)
+            result_coins.append(all_coins[idx])
+        except ValueError as ive:
+            raise ValueError(f"Coin: {coin.value} is not one of owners gas objects") from ive
+
+    return result_coins
+
+
+def _coin_merge(
+    client: SyncClient,
+    owner: SuiAddress,
+    coins: list[ObjectID],
+    threshold: int,
+    call_fn: Callable[[SyncTransaction, Optional[str]], SuiRpcResult],
+) -> Union[SuiCoinObject, SuiRpcResult]:
     """Coin merge as defined or all for owner."""
     merge_required = True
-    a_coins: list[SuiCoinObjects] = handle_result(txn.client.get_gas(txn.signer_block.sender.address)).data
-    to_coin = txn.gas
-    from_coins = a_coins[1:]
-    a_coin_set = {x.coin_object_id for x in a_coins}
+    clean_owner = owner.address
+    a_coins: list[SuiCoinObjects] = handle_result(client.get_gas(clean_owner, True)).data
+
     # If there are explict coins, validate they are part of owners gas then setup to/from
     if coins:
-        i_coin_set = {x.value for x in coins}
-        if i_coin_set.issubset(a_coin_set):
-            a_coins = handle_result(txn.client.get_objects_for(coins))
-            to_coin = a_coins[0]
-            if len(coins) == 1:
-                merge_required = False
-            else:
-                from_coins = a_coins[1:]
+        result_coins = _validate_owned_coins(a_coins, coins)
+        if len(result_coins) == 1:
+            to_coin = add_owner_to_gas_object(clean_owner, result_coins[0])
+            merge_required = False
         else:
-            raise ValueError(f"Invalid coin ID found in set {i_coin_set}")
+            result_coins = [add_owner_to_gas_object(clean_owner, x) for x in result_coins]
+            to_coin = result_coins[0]
+            from_coins = result_coins[1:]
     else:
         if len(a_coins) == 1:
             merge_required = False
+            to_coin = add_owner_to_gas_object(clean_owner, a_coins[0])
+        else:
+            result_coins = [add_owner_to_gas_object(clean_owner, x) for x in a_coins]
+            to_coin = result_coins[0]
+            from_coins = result_coins[1:]
 
     if merge_required:
-        txn.merge_coins(merge_to=to_coin, merge_from=from_coins)
-
+        print(f"Merging {len(from_coins)} coins to {to_coin.object_id}")
+        if len(from_coins) <= threshold:
 
-def _splay_out(txn: SuiTransaction, same_address: int, addresses: list[SuiAddress]):
-    """Perform the distribution of rolled up coins."""
+            txn = SyncTransaction(client, initial_sender=owner)
+            _ = txn.merge_coins(merge_to=txn.gas, merge_from=from_coins)
+            res = call_fn(txn, to_coin.object_id)
+            if not res.is_ok():
+                print("Failure on coin merge")
+                return res
+        else:
+            converted = 0
+            for chunk in list(partition(from_coins, threshold)):
+                txn = SyncTransaction(client, initial_sender=owner)
+                _ = txn.merge_coins(merge_to=txn.gas, merge_from=chunk)
+                res = call_fn(txn, to_coin.object_id)
+                if res.is_ok():
+                    converted += len(chunk)
+                else:
+                    print(f"Failure on coin in range {converted} -> {res.result_string}")
+                    return res
+    return to_coin
+
+
+def _splay_out(
+    client: SyncClient,
+    owner: SuiAddress,
+    primary: SuiCoinObject,
+    same_address: int,
+    addresses: list[SuiAddress],
+    call_fn: Callable[[SyncTransaction, Optional[str]], SuiRpcResult],
+) -> SuiRpcResult:
+    """."""
     distribute_required = True
     bcs_res: list[bcs.Argument] = []
     # Distribute rollup to self based on same_address
+    txn = SyncTransaction(client, initial_sender=owner)
+    # If splaying to self
     if same_address:
         distribute_required = False
         txn.split_coin_equal(coin=txn.gas, split_count=same_address)
-    # Distribute rollup to addresses identified
+        result = call_fn(txn, primary.object_id)
+    # Or splaying to others
     elif addresses:
         bcs_res = txn.split_coin_and_return(coin=txn.gas, split_count=len(addresses) + 1)
-    # Distribute rollup to addresses owned by this configuration
+    # Or splaying to all addresses known to configuration
     else:
         sender_addy = txn.signer_block.sender.address
-        addresses = [SuiAddress(x) for x in txn.client.config.addresses if x != sender_addy]
+        addresses = [SuiAddress(x) for x in client.config.addresses if x != sender_addy]
         bcs_res = txn.split_coin_and_return(coin=txn.gas, split_count=len(addresses) + 1)
-
     if distribute_required and bcs_res:
         for index, res in enumerate(bcs_res):
             txn.transfer_objects(transfers=res, recipient=addresses[index])
+        result = call_fn(txn, primary.object_id)
 
-
-def _inspect_only(txn: SuiTransaction):
-    """Run the inspection of the splay transaction.."""
-    print(txn.raw_kind().to_json(indent=2))
-    inspect_result: TxInspectionResult = txn.inspect_all()
-    if inspect_result and inspect_result.effects.status.succeeded:
-        print(f"Gas total: {inspect_result.effects.gas_used.total}", end="")
-        print(f" after rebate: {inspect_result.effects.gas_used.total_after_rebate}")
-        print(inspect_result.to_json(indent=2))
-    elif not inspect_result.effects.status.succeeded:
-        print(f"Inspection execution failed: {inspect_result.effects.status.error}")
-    else:
-        print(f"Inspection failed: {inspect_result.result_string}")
-
-
-def _execute(txn: SuiTransaction):
-    """Execute the transaction."""
-    tx_result: TxResponse = handle_result(txn.execute(gas_budget="100000"))
-    if tx_result.effects.status.succeeded:
-        print(tx_result.to_json(indent=2))
-    else:
-        print(f"Inspection execution failed: {tx_result.effects.status.error}")
+    return result
 
 
 def main():
     """Main entry point."""
     # Parse module meta data pulling out relevant content
     # to generate struct->class and functions->class
     arg_line = sys.argv[1:].copy()
@@ -116,21 +162,34 @@
         cfg_file = True
         arg_line = arg_line[1:]
     parsed = splay_parser(arg_line)
     if cfg_file:
         cfg = SuiConfig.sui_base_config()
     else:
         cfg = SuiConfig.default_config()
-    # Prepare transaction and Identify the owner of coins being splayed as well as who signs
-    txn = _set_sender(SuiTransaction(SuiClient(cfg)), parsed.owner)
+    # Setyup client
+    client = SyncClient(cfg)
     # Merge any/all coins
-    _coin_merge(txn, parsed.coins)
-    # Distribute merged coins equally to any/all addresses
-    _splay_out(txn, parsed.self_count, parsed.addresses)
-    if parsed.inspect:
-        _inspect_only(txn)
-    else:
-        _execute(txn)
+    primary = _coin_merge(
+        client, parsed.owner, parsed.coins, parsed.threshold, _inspect_only if parsed.inspect else _execute
+    )
+    if isinstance(primary, SuiRpcResult):
+        print(f"Failed {primary.result_string}")
+    else:
+        print(f"Ready to splay {primary.object_id}")
+        res = _splay_out(
+            client,
+            parsed.owner,
+            primary,
+            parsed.self_count,
+            parsed.addresses,
+            _inspect_only if parsed.inspect else _execute,
+        )
+        if isinstance(res, SuiRpcResult):
+            if res.is_ok():
+                print(res.result_data.to_json(indent=2))
+            else:
+                print(res.result_string)
 
 
 if __name__ == "__main__":
     main()
```

## pysui_gadgets/to_one/to_one.py

```diff
@@ -12,73 +12,60 @@
 # -*- coding: utf-8 -*-
 
 """pysui_gadgets: To One main module."""
 
 
 import sys
 import argparse
-from pysui.sui.sui_types.scalars import SuiString, ObjectID
-from pysui.sui.sui_types.address import SuiAddress
+
+
 from pysui.sui.sui_config import SuiConfig
-from pysui.sui.sui_clients.common import SuiRpcResult
+from pysui.sui.sui_clients.common import handle_result
 from pysui.sui.sui_clients import sync_client
-from pysui.sui.sui_builders.get_builders import GetCoins
-from pysui.sui.sui_builders.exec_builders import PayAllSui
+from pysui.sui.sui_clients.transaction import SuiTransaction
+from pysui.sui.sui_utils import partition
 from pysui_gadgets.utils.cmdlines import to_one_parser
-
-
-def _get_gas(client: sync_client.SuiClient, address: SuiAddress) -> SuiRpcResult:
-    """Efficient enumeration of SUI coins."""
-    coin_type = SuiString("0x2::sui::SUI")
-    # result = client.execute(GetCoinTypeBalance(owner=address, coin_type=coin_type))
-    result = client.execute(GetCoins(owner=address, coin_type=coin_type))
-    # if result.is_ok():
-    #     limit = SuiInteger(result.result_data.coin_object_count)
-    #     result = client.execute(GetCoins(owner=address, coin_type=coin_type, limit=limit))
-    return result
+from pysui_gadgets.utils.exec_helpers import add_owner_to_gas_object
 
 
 def _join_coins(client: sync_client.SuiClient, args: argparse.Namespace):
     """Using PayAllSui builder, join all mists from all gas object to one for an address."""
-    gas_res = _get_gas(client, args.address)
-    if gas_res.is_ok():
-        # Collect the OIDs of the coins, validate more than 2
-        just_oids = [ObjectID(x.coin_object_id) for x in gas_res.result_data.data]
-        if len(just_oids) < 2:
-            print("Can't join with less than 2 coins")
-            return
-        # Primary coin 0 is the coin all merge to
-        primary = args.primary if args.primary else just_oids[0]
-        # Ensure that the primary is the first in the list of objects
-        primary_index = just_oids.index(primary)
-        if primary_index != 0:
-            just_oids.insert(0, just_oids.pop(primary_index))
-        # Show the user whats going on
-        print("\nConsolidating all coins for address to Primary")
-        for coid in just_oids:
-            if primary == coid:
-                print(f"{coid} <- Primary")
-                continue
-            print(coid)
-        # Merge 'em all
-        pay_res = client.execute(
-            PayAllSui(
-                signer=args.address, input_coins=just_oids, recipient=args.address, gas_budget=SuiString("1000000000")
-            )
-        )
-        if pay_res.is_ok():
-            # Validate 1 coin left and show it's attributes
-            post_gas_res = _get_gas(client, args.address)
-            if post_gas_res.is_ok() and len(post_gas_res.result_data.data) == 1:
-                print("Coin merge success. Result:")
-                print(post_gas_res.result_data.data[0].to_json(indent=2))
+    gas_res: list = handle_result(client.get_gas(args.address, True)).data
+    if len(gas_res) < 2:
+        print("Can't join with less than 2 coins")
+        return
+    # Resolve primary by argument or selection
+    if args.primary:
+        index = [x.object_id for x in gas_res].index(args.primary.value)
+        primary = gas_res.pop(index)
+    else:
+        primary = gas_res[0]
+        gas_res = gas_res[1:]
+    owner = args.address.address
+    gas_res = [add_owner_to_gas_object(owner, x) for x in gas_res]
+    converted = 0
+
+    if len(gas_res) <= args.merge_threshold:
+        txn = SuiTransaction(client, initial_sender=args.address)
+        _ = txn.merge_coins(merge_to=txn.gas, merge_from=gas_res)
+        result = txn.execute(use_gas_object=primary.object_id)
+    else:
+        # Partition the gas_res into _MAX_INPUTS chunks
+        for chunk in list(partition(gas_res, args.merge_threshold)):
+            chunk_count = len(chunk)
+            txn = SuiTransaction(client, initial_sender=args.address)
+            _ = txn.merge_coins(merge_to=txn.gas, merge_from=chunk)
+            result = txn.execute(use_gas_object=primary.object_id)
+            if result.is_ok():
+                converted += chunk_count
             else:
-                print("Result error")
-        else:
-            print("Transaction failed")
+                print(f"Failure on coin in range {converted} -> {result.result_string}")
+                return
+    print(f"Succesfully merged {converted} coins to {primary.object_id}")
+    print(handle_result(client.get_object(primary.object_id)).to_json(indent=2))
 
 
 def main():
     """Main entry point."""
     # Parse module meta data pulling out relevant content
     # to generate struct->class and functions->class
     arg_line = sys.argv[1:].copy()
```

## pysui_gadgets/utils/cmd_arg_validators.py

```diff
@@ -13,24 +13,24 @@
 
 """Argparse validators for sample script reuse."""
 
 import sys
 import argparse
 from pathlib import Path
 from typing import Any, Sequence
-from pysui.sui.sui_types.scalars import ObjectID, SuiInteger
+from pysui.sui.sui_types.scalars import ObjectID
 from pysui.sui.sui_types.address import SuiAddress
 
 
 def check_positive(value: str) -> int:
     """Check for positive integers."""
     ivalue = int(value)
     if ivalue < 0:
-        raise argparse.ArgumentTypeError(f"{value} is an invalid positive int value")
-    return SuiInteger(ivalue)
+        raise argparse.ArgumentTypeError(f"{value} must be positive int value")
+    return ivalue
 
 
 class ValidateAddress(argparse.Action):
     """Address validator."""
 
     def __call__(
         self,
```

## pysui_gadgets/utils/cmdlines.py

```diff
@@ -10,15 +10,15 @@
 #    limitations under the License.
 
 # -*- coding: utf-8 -*-
 
 """pysui-gadget: DSL package command line parser."""
 import argparse
 
-from pysui_gadgets.utils.cmd_arg_validators import ValidateObjectID, ValidateAddress, ValidatePackageDir
+from pysui_gadgets.utils.cmd_arg_validators import ValidateObjectID, ValidateAddress, ValidatePackageDir, check_positive
 
 # For dsl gadget
 def dsl_parser(in_args: list) -> argparse.Namespace:
     """build_parser Simple command line for app.
 
     :param in_args: list of argument strings
     :type in_args: list
@@ -102,14 +102,22 @@
     parser.add_argument(
         "-p",
         "--primary",
         required=False,
         help="The primary coin to merge to. Defaults to first one found",
         action=ValidateObjectID,
     )
+    parser.add_argument(
+        "-m",
+        "--merge-threshold",
+        required=False,
+        default=10,
+        help="Sets the number of coins to merge at a time. Defaults to 10.",
+        type=check_positive,
+    )
     return parser.parse_args(in_args if in_args else ["--help"])
 
 
 # for package gadget
 def package_parser(in_args: list) -> argparse.Namespace:
     """build_parser Simple command line for app.
 
@@ -271,14 +279,23 @@
         dest="addresses",
         required=False,
         nargs="+",
         help="splay coins to addresses.",
         action=ValidateAddress,
     )
     parser.add_argument(
+        "-m",
+        "--merge-threshold",
+        dest="threshold",
+        required=False,
+        default=10,
+        help="Sets the number of coins to merge at a time. Defaults to 10.",
+        type=check_positive,
+    )
+    parser.add_argument(
         "-i", "--inspect", help="inspect and do not execute", required=False, action="store_true", dest="inspect"
     )
     return parser.parse_args(in_args if in_args else ["--help"])
 
 
 # for version history gadget
 def vh_parser(in_args: list) -> argparse.Namespace:
```

## pysui_gadgets/utils/filters.py

```diff
@@ -1,8 +1,8 @@
-#    Copyright 2022 Frank V. Castellucci
+#    Copyright  Frank V. Castellucci
 #    Licensed under the Apache License, Version 2.0 (the "License");
 #    you may not use this file except in compliance with the License.
 #    You may obtain a copy of the License at
 #        http://www.apache.org/licenses/LICENSE-2.0
 #    Unless required by applicable law or agreed to in writing, software
 #    distributed under the License is distributed on an "AS IS" BASIS,
 #    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
```

## Comparing `pysui_gadgets-0.1.0.dist-info/LICENSE` & `pysui_gadgets-0.2.0.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pysui_gadgets-0.1.0.dist-info/METADATA` & `pysui_gadgets-0.2.0.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pysui-gadgets
-Version: 0.1.0
+Version: 0.2.0
 Summary: pysui (Python Sui Client SDK) additional tools
 License: Apache-2.0
 Project-URL: changelog, https://github.com/FrankC01/pysui_gadgets/issues
 Project-URL: repository, https://github.com/FrankC01/pysui_gadgets
 Project-URL: issues, https://github.com/FrankC01/pysui_gadgets/issues
 Keywords: software development kit,sui,blockchain,utilities,pysui
 Classifier: Development Status :: 4 - Beta
@@ -15,15 +15,15 @@
 Classifier: Operating System :: OS Independent
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Programming Language :: Python :: 3.10
 Classifier: Programming Language :: Python :: 3 :: Only
 Requires-Python: >=3.10
 Description-Content-Type: text/x-rst
 License-File: LICENSE
-Requires-Dist: pysui (>=0.23.0)
+Requires-Dist: pysui (>=0.29.0)
 
 pysui-gadgets
 =============
 
 pysui-gadgets includes tools and utilities that work with the pysui SDK.
 
 Gadgets included:
```

## Comparing `pysui_gadgets-0.1.0.dist-info/RECORD` & `pysui_gadgets-0.2.0.dist-info/RECORD`

 * *Files 5% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 pysui_gadgets/__init__.py,sha256=hNVPZ8dMedM75G-ViFfEo8z4xE7J3kENdNww6neGhPk,1098
-pysui_gadgets/version.py,sha256=8eiWLL7ImwzVPXUXBFf0UfyY7yrMXoOCwkYtXd6s2RY,679
+pysui_gadgets/version.py,sha256=15nVO_sZsLQL1nYE0I8-yjlNwbXbpTTcFNmK4b6LYYo,679
 pysui_gadgets/dsl/__init__.py,sha256=tTnn5BMcXR7A5OZ2I5SeQpgyPiz9omrxU9_NQqXBw60,655
 pysui_gadgets/dsl/dslgen.py,sha256=DFBXyEvffAMS-MubYBOa0myZQSC_s0rwb-U6ci-oSQI,2393
 pysui_gadgets/dsl/dsl_run/__init__.py,sha256=MvdV62PGBFIhF94sj0-_3ZpOavztcvbxigyn3w97h20,711
 pysui_gadgets/dsl/dsl_run/converter.py,sha256=uY8UgqmnTdBzmu4s6x8FaHDJxa8x2gkT-sWs-f6GPAw,1857
 pysui_gadgets/dsl/generators/__init__.py,sha256=9dmgJvrGTNtwKDBaU181fPrmbwTfIX8h4gP1jlu6Ql4,664
 pysui_gadgets/dsl/generators/package_gen.py,sha256=sJRBI9rj5uvlCxGFzwf_heEUdc5lXkVw_c85oHvX6MM,14074
 pysui_gadgets/dsl/ir/__init__.py,sha256=lLxzOiLHeum5a0HdcYfMFQN6cJCmXVtVP4CCqvS60j8,672
@@ -17,22 +17,23 @@
 pysui_gadgets/package/__init__.py,sha256=LqLEDQRD7QcYOGgByVWu4Hxhe58QJOy-sEaA6nblgUI,665
 pysui_gadgets/package/package.py,sha256=xRxMF76BcdCGczULJkliOiteKr3I4Z0qPgB8x_RAc6o,3175
 pysui_gadgets/package/cmds/__init__.py,sha256=6WJTluyrCR4S0ElNV4TK4FqzoFq1trsCRzVgkcvKpF0,665
 pysui_gadgets/package/cmds/funcs.py,sha256=1rtGvpI-1TJKRzpznw51qZz6hfGuC2KBqalBBPRq2rY,5576
 pysui_gadgets/package/cmds/lists.py,sha256=cOr6_DAjbDx0pNIHfiYh7lb39wDcMygLZ70yF_HeTfw,1137
 pysui_gadgets/package/cmds/structs.py,sha256=ckjJ0FALMNuIG4iimOcztvd5WkCXqTp9aeXxp3dlUMc,3505
 pysui_gadgets/splay/__init__.py,sha256=5fc88O6nzDM2KOfdFew6q0X-0cUciM5vZFuda9KPBew,681
-pysui_gadgets/splay/splay.py,sha256=TPhNp3sTAgyw5Br1bVbqXs1RNvO6Iql_Sd8ClZdosTE,5490
+pysui_gadgets/splay/splay.py,sha256=u-wYpfi8lYqU_ThoE1z8SQsV3re0mEnS7L7A8cyV110,7367
 pysui_gadgets/to_one/__init__.py,sha256=6pRsDLLt5AtN4atDle6g3JlspPq8V3X9vZkSUqo88Nk,679
-pysui_gadgets/to_one/to_one.py,sha256=aEZizNOJpHVR2kn2xNLeATWe25EoDxHNZYqpJOVW_k0,4054
+pysui_gadgets/to_one/to_one.py,sha256=AhC-ODeZBnpXx4C_4bzJlCej1a7T12V-ZEUI79qwrJI,3377
 pysui_gadgets/utils/__init__.py,sha256=ysQb1D3KjunnoE-YsBXpVGgxq-ZU-fU5IQSMxEcyiBA,666
-pysui_gadgets/utils/cmd_arg_validators.py,sha256=czFc_j7SU8CsALuxFAeUAUkPf8c9FahWQesSo-0vCs8,2860
-pysui_gadgets/utils/cmdlines.py,sha256=R-UVi83ovNiNsYjcG9Q4vKMs7k7zVhJtVVT5B3uydAQ,9816
-pysui_gadgets/utils/filters.py,sha256=qK9yd-kImAgidj3kZAN0WAafhnKPCaQ_w885jvJB4a4,6628
+pysui_gadgets/utils/cmd_arg_validators.py,sha256=XPx5TBRpdC4XD05vw7GgsrteDptQPAfMFWJbJHG9CO8,2830
+pysui_gadgets/utils/cmdlines.py,sha256=6i2sFozKvp8eGu1m_lBCZZ7kxDRhunyfwLKVMzvvkjk,10306
+pysui_gadgets/utils/exec_helpers.py,sha256=_xbNQv4AzfyWWvuCiYUVB5SKq2Tq9silj6AX_OVjUno,1106
+pysui_gadgets/utils/filters.py,sha256=tI9p_smB9UOou_L9aFElpzcIiyyJBv_HR1r2RhUvcSY,6624
 pysui_gadgets/vh/__init__.py,sha256=2yUbfenbb2-mFXVqNIY7TBhMnc6FOr7mBGTnF6Pt0lU,674
 pysui_gadgets/vh/vh.py,sha256=QtwKSCS4kU0fzy27p2mjjIWJ1G0rt_litNzcBygYXso,7051
-pysui_gadgets-0.1.0.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-pysui_gadgets-0.1.0.dist-info/METADATA,sha256=4DgDgfFn34Q1jeZBwcLSTWVIT-ioKCWgWrTGLLX41RI,2837
-pysui_gadgets-0.1.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-pysui_gadgets-0.1.0.dist-info/entry_points.txt,sha256=MB3c_66zJe5oLN83p5kwxaNEBvf_tMHlqd81eKCjCoM,255
-pysui_gadgets-0.1.0.dist-info/top_level.txt,sha256=qZegWxttTInQhJ2BO_qaXsm-dkZ2YnuBkBwk--5sLDA,23
-pysui_gadgets-0.1.0.dist-info/RECORD,,
+pysui_gadgets-0.2.0.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+pysui_gadgets-0.2.0.dist-info/METADATA,sha256=szEGhQt458ivI2A8ey7b_EZoRHdVd0LEoUWHiTdX_jg,2837
+pysui_gadgets-0.2.0.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+pysui_gadgets-0.2.0.dist-info/entry_points.txt,sha256=MB3c_66zJe5oLN83p5kwxaNEBvf_tMHlqd81eKCjCoM,255
+pysui_gadgets-0.2.0.dist-info/top_level.txt,sha256=qZegWxttTInQhJ2BO_qaXsm-dkZ2YnuBkBwk--5sLDA,23
+pysui_gadgets-0.2.0.dist-info/RECORD,,
```

