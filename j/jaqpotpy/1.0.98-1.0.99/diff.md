# Comparing `tmp/jaqpotpy-1.0.98-py3-none-any.whl.zip` & `tmp/jaqpotpy-1.0.99-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,9 @@
-Zip file size: 6150617 bytes, number of entries: 153
--rw-r--r--  2.0 unx       51 b- defN 23-Jan-12 18:28 jaqpotpy/__init__.py
+Zip file size: 6150715 bytes, number of entries: 153
+-rw-r--r--  2.0 unx       52 b- defN 23-Jan-13 14:26 jaqpotpy/__init__.py
 -rw-r--r--  2.0 unx      435 b- defN 22-Mar-03 14:01 jaqpotpy/base_client.py
 -rw-r--r--  2.0 unx    35050 b- defN 22-Jul-15 19:24 jaqpotpy/jaqpot.py
 -rw-r--r--  2.0 unx        0 b- defN 20-Nov-25 14:24 jaqpotpy/api/__init__.py
 -rw-r--r--  2.0 unx     2555 b- defN 22-Mar-10 14:37 jaqpotpy/api/algorithms_api.py
 -rw-r--r--  2.0 unx      882 b- defN 22-Mar-10 14:37 jaqpotpy/api/chempot_api.py
 -rw-r--r--  2.0 unx     1942 b- defN 20-Nov-25 15:28 jaqpotpy/api/dataset_api.py
 -rw-r--r--  2.0 unx      860 b- defN 21-Feb-01 09:51 jaqpotpy/api/doa_api.py
@@ -95,19 +95,19 @@
 -rw-r--r--  2.0 unx     1178 b- defN 22-Apr-15 13:58 jaqpotpy/helpers/periodic_table/base_classes.py
 -rw-r--r--  2.0 unx     3120 b- defN 22-Apr-15 13:58 jaqpotpy/helpers/periodic_table/element.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Apr-14 10:48 jaqpotpy/jaqpotpy_tests/__init__.py
 -rw-r--r--  2.0 unx     1130 b- defN 22-Jun-24 22:41 jaqpotpy/jaqpotpy_tests/jaqpotpy_test.py
 -rw-r--r--  2.0 unx       21 b- defN 20-Nov-25 14:24 jaqpotpy/mappers/__init__.py
 -rw-r--r--  2.0 unx     1634 b- defN 20-Nov-25 14:24 jaqpotpy/mappers/decode.py
 -rw-r--r--  2.0 unx      639 b- defN 22-Nov-16 15:29 jaqpotpy/models/__init__.py
--rw-r--r--  2.0 unx    19386 b- defN 23-Jan-12 16:55 jaqpotpy/models/base_classes.py
+-rw-r--r--  2.0 unx    19598 b- defN 23-Jan-13 14:28 jaqpotpy/models/base_classes.py
 -rw-r--r--  2.0 unx      931 b- defN 21-Feb-01 09:51 jaqpotpy/models/models.py
 -rw-r--r--  2.0 unx    10840 b- defN 22-Dec-19 12:09 jaqpotpy/models/sklearn.py
--rw-r--r--  2.0 unx    17051 b- defN 23-Jan-12 18:28 jaqpotpy/models/torch.py
--rw-r--r--  2.0 unx    29186 b- defN 23-Jan-12 15:01 jaqpotpy/models/torch_geometric.py
+-rw-r--r--  2.0 unx    17057 b- defN 23-Jan-13 14:09 jaqpotpy/models/torch.py
+-rw-r--r--  2.0 unx    29567 b- defN 23-Jan-13 14:28 jaqpotpy/models/torch_geometric.py
 -rw-r--r--  2.0 unx       97 b- defN 22-Oct-21 11:50 jaqpotpy/models/evaluator/__init__.py
 -rw-r--r--  2.0 unx     1912 b- defN 23-Jan-02 14:37 jaqpotpy/models/evaluator/evaluator.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Oct-21 11:45 jaqpotpy/models/evaluator/test/__init__.py
 -rw-r--r--  2.0 unx    16203 b- defN 22-Dec-23 18:02 jaqpotpy/models/evaluator/test/test_evaluators.py
 -rw-r--r--  2.0 unx        0 b- defN 22-May-17 15:41 jaqpotpy/models/generative/__init__.py
 -rw-r--r--  2.0 unx    23444 b- defN 23-Jan-02 15:29 jaqpotpy/models/generative/gan.py
 -rw-r--r--  2.0 unx    14246 b- defN 22-Dec-24 07:58 jaqpotpy/models/generative/molecular_metrics.py
@@ -143,13 +143,13 @@
 -rw-r--r--  2.0 unx    10915 b- defN 22-Feb-22 16:30 jaqpotpy/utils/pdbqt_utils.py
 -rw-r--r--  2.0 unx     2501 b- defN 22-Jan-12 22:55 jaqpotpy/utils/pytorch_utils.py
 -rw-r--r--  2.0 unx    21146 b- defN 22-Dec-09 12:25 jaqpotpy/utils/rdkit_utils.py
 -rw-r--r--  2.0 unx     5514 b- defN 22-Apr-06 19:54 jaqpotpy/utils/seeding.py
 -rw-r--r--  2.0 unx      862 b- defN 21-Dec-20 18:30 jaqpotpy/utils/types.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Nov-28 15:02 run_tests/__init__.py
 -rw-r--r--  2.0 unx      978 b- defN 22-Nov-28 15:02 run_tests/run_tests.py
--rw-r--r--  2.0 unx     1070 b- defN 23-Jan-12 18:28 jaqpotpy-1.0.98.dist-info/LICENSE
--rw-r--r--  2.0 unx      576 b- defN 23-Jan-12 18:28 jaqpotpy-1.0.98.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Jan-12 18:28 jaqpotpy-1.0.98.dist-info/WHEEL
--rw-r--r--  2.0 unx       19 b- defN 23-Jan-12 18:28 jaqpotpy-1.0.98.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    13798 b- defN 23-Jan-12 18:28 jaqpotpy-1.0.98.dist-info/RECORD
-153 files, 6844602 bytes uncompressed, 6128601 bytes compressed:  10.5%
+-rw-r--r--  2.0 unx     1070 b- defN 23-Jan-13 14:31 jaqpotpy-1.0.99.dist-info/LICENSE
+-rw-r--r--  2.0 unx      576 b- defN 23-Jan-13 14:31 jaqpotpy-1.0.99.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Jan-13 14:31 jaqpotpy-1.0.99.dist-info/WHEEL
+-rw-r--r--  2.0 unx       19 b- defN 23-Jan-13 14:31 jaqpotpy-1.0.99.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    13798 b- defN 23-Jan-13 14:31 jaqpotpy-1.0.99.dist-info/RECORD
+153 files, 6845202 bytes uncompressed, 6128699 bytes compressed:  10.5%
```

## zipnote {}

```diff
@@ -438,23 +438,23 @@
 
 Filename: run_tests/__init__.py
 Comment: 
 
 Filename: run_tests/run_tests.py
 Comment: 
 
-Filename: jaqpotpy-1.0.98.dist-info/LICENSE
+Filename: jaqpotpy-1.0.99.dist-info/LICENSE
 Comment: 
 
-Filename: jaqpotpy-1.0.98.dist-info/METADATA
+Filename: jaqpotpy-1.0.99.dist-info/METADATA
 Comment: 
 
-Filename: jaqpotpy-1.0.98.dist-info/WHEEL
+Filename: jaqpotpy-1.0.99.dist-info/WHEEL
 Comment: 
 
-Filename: jaqpotpy-1.0.98.dist-info/top_level.txt
+Filename: jaqpotpy-1.0.99.dist-info/top_level.txt
 Comment: 
 
-Filename: jaqpotpy-1.0.98.dist-info/RECORD
+Filename: jaqpotpy-1.0.99.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## jaqpotpy/__init__.py

```diff
@@ -1,3 +1,4 @@
 from .jaqpot import Jaqpot
 
-__version__ = '1.0.98'
+
+__version__ = '1.0.99'
```

## jaqpotpy/models/base_classes.py

```diff
@@ -274,24 +274,28 @@
             else:
                 data = self._descriptors.featurize_dataframe(self._smiles)
 
             if self.external:
                 ext = pd.DataFrame.from_dict(self.external)
                 data = pd.concat([data, ext], axis=1)
             graph_data_list = []
-            if self._descriptors.__name__ == 'MolGraphConvFeaturizer':
+
+            # if self._descriptors.__name__ == 'MolGraphConvFeaturizer':
                 # graph_data = data['MoleculeGraph']
-                for g in data['MoleculeGraph'].to_list():
+            if self.library == ['torch_geometric', 'torch']:
+                column = data.columns[0]
+                for g in data[column].to_list():
                     from torch_geometric.data import Data
                     dat = Data(x=torch.FloatTensor(g.node_features)
                                , edge_index=torch.LongTensor(g.edge_index)
                                , edge_attr=g.edge_features
                                , num_nodes=g.num_nodes)
                     graph_data_list.append(dat)
                 self._prediction = []
+
             if self._X == 'ImagePath':
                 pass
             elif self._X != ['TorchMolGraph'] and self.X != ['OneHotSequence'] and self.X != ["SmilesImage"]:
                 data = data[self._X].to_numpy()
             elif self._X == ['SmilesImage']:
                 datas = []
                 for v in data.values:
@@ -340,15 +344,19 @@
                     os.remove("./temp_model.pt")
                     self.model.eval()
                 from torch_geometric.loader import DataLoader
                 data_loader = DataLoader(graph_data_list, batch_size=len(graph_data_list))
                 for data in data_loader:
                     x = data.x
                     edge_index = data.edge_index
-                    edge_attributes = torch.Tensor(data.edge_attr[0])
+                    try:
+                        edge_attributes = torch.Tensor(data.edge_attr[0])
+                    except TypeError:
+                        edge_attributes = None
+
                     if edge_attributes is not None:
                         pred = self.model(x, edge_index, edge_attributes, data.batch)
                     else:
                         pred = self.model(x, edge_index, data.batch)
                     if self.modeling_task == "classification":
                         for p in pred:
                             prob = nnf.softmax(p, dim=0)
```

## jaqpotpy/models/torch.py

```diff
@@ -173,15 +173,15 @@
             preds = np.array([])
             for data in self.test_loader:
                 input = data[0].to(self.device)
                 y = data[1].to(self.device)
                 out = self.best_model(input.float())
                 pred = out.argmax(dim=1)
                 correct += int((pred == y.float()).sum())
-                truth = np.append(truth, y.float().numpy())
+                truth = np.append(truth, y.cpu().float().numpy())
                 preds = np.append(preds, pred.cpu().numpy())
             # return out, pred.numpy(), correct / len(dataloader.dataset)
             for eval_key in eval_keys:
                 eval_function = self.evaluator.functions.get(eval_key)
                 print(eval_key + ": " + str(eval_function(truth, preds)))
         else:
             print("No eval functions passed")
```

## jaqpotpy/models/torch_geometric.py

```diff
@@ -291,20 +291,22 @@
         return self
 
     def train(self):
         self.model_nn.train()
         for data in self.train_loader:
             x = data.x.to(self.device)
             edge_index = data.edge_index.to(self.device)
-            edge_attributes = data.edge_attr.to(self.device)
+            try:
+                edge_attributes = data.edge_attr.to(self.device)
+            except AttributeError:
+                edge_attributes = None
             batch = data.batch.to(self.device)
-
             y = data.y.to(self.device)
-
             if edge_attributes is not None:
+
                 out = self.model_nn(x, edge_index, edge_attributes, batch)
             else:
                 out = self.model_nn(x, edge_index, batch)
             loss = self.criterion(out, y)
             loss.backward()
             self.optimizer_local.step()
             self.optimizer_local.zero_grad()
@@ -312,15 +314,18 @@
     def test(self, dataloader):
         self.model_nn.eval()
         if self.dataset.task == 'classification':
             correct = 0
             for data in dataloader:
                 x = data.x.to(self.device)
                 edge_index = data.edge_index.to(self.device)
-                edge_attributes = data.edge_attr.to(self.device)
+                try:
+                    edge_attributes = data.edge_attr.to(self.device)
+                except AttributeError:
+                    edge_attributes = None
                 batch = data.batch.to(self.device)
 
                 y = data.y.to(self.device)
 
                 if edge_attributes is not None:
                     out = self.model_nn(x, edge_index, edge_attributes, batch)
                 else:
@@ -329,15 +334,17 @@
                 correct += int((pred == y).sum())
             return out, pred.cpu().numpy(), correct / len(dataloader.dataset)
         else:
             self.model_nn.eval()
             for data in dataloader:
                 x = data.x.to(self.device)
                 edge_index = data.edge_index.to(self.device)
-                edge_attributes = data.edge_attr.to(self.device)
+                edge_attributes = None
+                if data.edge_attr is not None:
+                    edge_attributes = data.edge_attr.to(self.device)
                 batch = data.batch.to(self.device)
 
                 y = data.y.to(self.device)
 
                 if edge_attributes is not None:
                     out = self.model_nn(x, edge_index, edge_attributes, batch)
                 else:
@@ -355,15 +362,17 @@
             eval_keys = self.evaluator.functions.keys()
             correct = 0
             truth = np.array([])
             preds = np.array([])
             for data in self.test_loader:
                 x = data.x.to(self.device)
                 edge_index = data.edge_index.to(self.device)
-                edge_attributes = data.edge_attr.to(self.device)
+                edge_attributes = None
+                if data.edge_attr is not None:
+                    edge_attributes = data.edge_attr.to(self.device)
                 batch = data.batch.to(self.device)
 
                 y = data.y.to(self.device)
 
                 if edge_attributes is not None:
                     out = self.best_model(x, edge_index, edge_attributes, batch)
                 else:
```

## Comparing `jaqpotpy-1.0.98.dist-info/LICENSE` & `jaqpotpy-1.0.99.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `jaqpotpy-1.0.98.dist-info/METADATA` & `jaqpotpy-1.0.99.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: jaqpotpy
-Version: 1.0.98
+Version: 1.0.99
 Summary: Standardizing molecular modeling
 Home-page: https://github.com/euclia/jaqpotpy
 Author: Pantelis Karatzas
 Author-email: pantelispanka@gmail.com
 License: MIT License
 Platform: UNKNOWN
 Description-Content-Type: text/markdown
```

## Comparing `jaqpotpy-1.0.98.dist-info/RECORD` & `jaqpotpy-1.0.99.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-jaqpotpy/__init__.py,sha256=IqsnxSle12zXgr2BFDbStfmSlWXUVy52U-8KrktG2wg,51
+jaqpotpy/__init__.py,sha256=kUAmIeF0XguBDgu5y7UeM4tpG5slcKamRolI6gQX7lU,52
 jaqpotpy/base_client.py,sha256=qDmgB4xQe6Gqg41HPgWpyK0T1vkui4CClpmkVDUXAHA,435
 jaqpotpy/jaqpot.py,sha256=UI6HDtqq8PuATBpzgZv971Yop0dmMy7V156vE3I5bVg,35050
 jaqpotpy/api/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 jaqpotpy/api/algorithms_api.py,sha256=nFuPnFh-SRHmDwiZOxK2PFriug0GdSmgBYV1YMvhjlA,2555
 jaqpotpy/api/chempot_api.py,sha256=A4RyBUNWgEJ-Hu8gYJHg3hN_OQdAoNXrouq0jBhD9NI,882
 jaqpotpy/api/dataset_api.py,sha256=frBVaELm-EHomjzdZBKb8ZJv6lcWL86Wox03EA0XsiI,1942
 jaqpotpy/api/doa_api.py,sha256=42lCHrrF8F0_lUb6hX7EK2pn6e2wDvV_szPhnqfH_fw,860
@@ -94,19 +94,19 @@
 jaqpotpy/helpers/periodic_table/base_classes.py,sha256=LhxySxLjSooKZWdlnMWsYnlZD8fnSKXd45P46HfkMaQ,1178
 jaqpotpy/helpers/periodic_table/element.py,sha256=9bxYu3N9VRFZCrZOVmRMrug4Z8ZJCFnC_pHD5YOdbAg,3120
 jaqpotpy/jaqpotpy_tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 jaqpotpy/jaqpotpy_tests/jaqpotpy_test.py,sha256=fJSZRCBgeEXbzKFbrNqJDRuYrS82bu7_oNSI4l8wlP4,1130
 jaqpotpy/mappers/__init__.py,sha256=DmFNzFoO7BkD5-IScmfCE_uZ6qChBXu6iHoFl_gK1fM,21
 jaqpotpy/mappers/decode.py,sha256=ns1WTkzUV7RN3FEe4_EQ9vsCofNrjbPujS2W_vd2odA,1634
 jaqpotpy/models/__init__.py,sha256=JAY9p62Yl0pUYyDfQfKiO8Sa3JGQ-ykTbL6cGUYA1ss,639
-jaqpotpy/models/base_classes.py,sha256=jaF0xhQnnIFiOMucohKjZq0892aleAFQAN4cIMl1vbw,19386
+jaqpotpy/models/base_classes.py,sha256=HpoZAxDAME5U59OZFxsokc-qm3jdtC_dxBO2wM8-2M4,19598
 jaqpotpy/models/models.py,sha256=4JAWLEnZkYh0v9yfr7BDz4_zD4QHWjSjocLtC_ZT8e4,931
 jaqpotpy/models/sklearn.py,sha256=C3_22-CM7oeOtIMuZr7l8Hlo1VVpYMahKjeN6BiOX1M,10840
-jaqpotpy/models/torch.py,sha256=KPsU4739tgXyqBwtr_EZyldvLz3RMp-ZUu5s3sJx4BM,17051
-jaqpotpy/models/torch_geometric.py,sha256=9Osw1OGDdQI29H_S9U1GlNwC_uHo29axEWL94c9eDXw,29186
+jaqpotpy/models/torch.py,sha256=N3xH77pYgFE1718S_vyyhXL4p9cxYt00b8IVHFHlM-E,17057
+jaqpotpy/models/torch_geometric.py,sha256=dGk9_tjI9TA6Ql6SqW00UucDhY-LEngVAWDmzFemtnE,29567
 jaqpotpy/models/evaluator/__init__.py,sha256=zuNDlxb1oU3Gj3AXiHXwrCXYTtrVGimKLJTR8jiv2qw,97
 jaqpotpy/models/evaluator/evaluator.py,sha256=3IYrUR84-r0uWCu9i_NjlJ8_YjSo4DpGxgUc3U9eYNo,1912
 jaqpotpy/models/evaluator/test/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 jaqpotpy/models/evaluator/test/test_evaluators.py,sha256=3vrXsL0YeIBEVhiRV4yvSoD2Cy2FL0sbRzyCzGT5o_E,16203
 jaqpotpy/models/generative/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 jaqpotpy/models/generative/gan.py,sha256=hCDpePtjm1nF0zD6SWCPitnsVU68uCukbBM2aPP9XTA,23444
 jaqpotpy/models/generative/molecular_metrics.py,sha256=9vLBNO_TYeG-bbr9-OtpJS4rXMUbZLc1G4TUE51cv1Q,14246
@@ -142,12 +142,12 @@
 jaqpotpy/utils/pdbqt_utils.py,sha256=CXmFW8Fn8IqsfjxBMl8HpOjOf7mryv_FJAc0UnWXL80,10915
 jaqpotpy/utils/pytorch_utils.py,sha256=7TFi18DHYZ7kuQRglbprPq7bY80cGLn3vyDjYLt24nM,2501
 jaqpotpy/utils/rdkit_utils.py,sha256=GG005EUeTa5YKW9PZDrIdqLMd2SSkxjRASOzOWHa7DY,21146
 jaqpotpy/utils/seeding.py,sha256=CVllYVBaxFx2mNJQeQ8bH5oLgH-b-0xwvQz0HSmRBnU,5514
 jaqpotpy/utils/types.py,sha256=1dERKoG90D3Do2sAI1CaeSjXlrHZoPrX3tStTVBNH_o,862
 run_tests/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 run_tests/run_tests.py,sha256=Q6kCtaNFA9mAMASDJt655t6Bt8HTrvhxYWG5aHuC3f0,978
-jaqpotpy-1.0.98.dist-info/LICENSE,sha256=aDCxTZypd6iJeW6rf5PeaFWzfFq7UXeB34PI93nemYM,1070
-jaqpotpy-1.0.98.dist-info/METADATA,sha256=oYDb3WF7ojCLw3KIMGWvAKpJ6Sg7YKy7zdUWBx3dG3Q,576
-jaqpotpy-1.0.98.dist-info/WHEEL,sha256=EVRjI69F5qVjm_YgqcTXPnTAv3BfSUr0WVAHuSP3Xoo,92
-jaqpotpy-1.0.98.dist-info/top_level.txt,sha256=YrRenf-fuaRF2qO7qvaa_aQO2MRXBlXO-dZ1ohFWEgo,19
-jaqpotpy-1.0.98.dist-info/RECORD,,
+jaqpotpy-1.0.99.dist-info/LICENSE,sha256=aDCxTZypd6iJeW6rf5PeaFWzfFq7UXeB34PI93nemYM,1070
+jaqpotpy-1.0.99.dist-info/METADATA,sha256=hkEXtjEwvv-emg4Dlpb_5PccdriKvEeUlgSr9ox5Rr4,576
+jaqpotpy-1.0.99.dist-info/WHEEL,sha256=EVRjI69F5qVjm_YgqcTXPnTAv3BfSUr0WVAHuSP3Xoo,92
+jaqpotpy-1.0.99.dist-info/top_level.txt,sha256=YrRenf-fuaRF2qO7qvaa_aQO2MRXBlXO-dZ1ohFWEgo,19
+jaqpotpy-1.0.99.dist-info/RECORD,,
```

